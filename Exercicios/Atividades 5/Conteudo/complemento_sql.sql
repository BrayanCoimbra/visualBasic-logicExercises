--------------------------------------------------
--------------------------------------------------
TABELAS MAES
PREFIXO + FUNCIONALIDADE
COC + TRANSFERENCIAS
TABELAS FILHAS
PREFIXO + FUNCIONALIDADE + CARACTERISTICA
COC + TRANSFERENCIAS + SIT

CONTA CORRENTE - COC
RENDA FIXA - RNF
TESOURARIA - TES
COBRANCA - COB
CONTAS A PAGAR - CAP
INFORMES - INF

ALTER TABLE COCTRANSFERENCIAS ADD CONSTRAINT PK_COCTRANSFERENCIAS PRIMARY KEY (SEQCOCTRANSF)
ALTER TABLE COCTRANSFERENCIAS ADD CONSTRAINT FK_COCTRANSFERENCIAS_COCCONTAS FOREIGN KEY (EMPRESA, AGENCIA, NROCONTA) REFERENCES COCCONTAS (EMPRESA, AGENCIA, NROCONTA)

CREATE SEQUENCE SEQ_COCTRANSF MINVALUE 1 MAXVALUE 9999999999 INCREMENT BY 1 NOCYCLE NOORDER NOCACHE
CREATE OR REPLACE TRIGGER TRS_COCTRANSFERENCIAS BEFORE INSERT ON COCTRANSFERENCIAS
FOR EACH ROW
BEGIN
IF :new.SeqCocTransf IS NULL THEN
SELECT SEQ_CocTransf.nextval INTO :new.SeqCocTransf FROM DUAL;
PCKLYD_SESSION.UltimoSequence := :new.SeqCocTransf;
END IF;
END;
/

CREATE TABLE COCLIVROS (
SEQLIVRO NUMBER(15,0) NOT NULL,
NOME VARCHAR2(255) NOT NULL,
AUTOR VARCHAR2(255) NULL,
EDITORA VARCHAR2(255) NULL,
DATALANC DATE NULL
)
STORAGE (
NEXT 1024 K
)
/CREATE INDEX IDX_NOME
ON COCLIVROS (
NOME
)
STORAGE (
NEXT 1024 K
)
/ALTER TABLE COCLIVROS
ADD CONSTRAINT PK_COCLIVROS PRIMARY KEY (
SEQLIVRO
)
USING INDEX
STORAGE (
NEXT 1024 K
)
/CREATE TABLE COCLIVROSVENDIDOS (
SEQLIVROVENDIDO NUMBER(15,0) NOT NULL,
SEQLIVRO NUMBER(15,0) NOT NULL,
DATAVENDA DATE NOT NULL,
SEQCOMPRADOR NUMBER(15,0) NOT NULL
)
STORAGE (
NEXT 1024 K
)
/CREATE INDEX IDX_DATAVENDA
ON COCLIVROSVENDIDOS (
DATAVENDA
)
STORAGE (
NEXT 1024 K
)
/ALTER TABLE COCLIVROSVENDIDOS
ADD CONSTRAINT PK_COCLIVROSVENDIDOS PRIMARY KEY (
SEQLIVROVENDIDO
)
USING INDEX
STORAGE (
NEXT 1024 K
)
/ALTER TABLE COCLIVROSVENDIDOS
ADD CONSTRAINT FK_COCLIVROSCOMP_COCLIVROSVEND FOREIGN KEY (
SEQCOMPRADOR
) REFERENCES COCLIVROSCOMPRADOR (
SEQCOMPRADOR
)
/ALTER TABLE COCLIVROSVENDIDOS
ADD CONSTRAINT FK_COCLIVROSVENDIDOS_COCLIVROS FOREIGN KEY (
SEQLIVRO
) REFERENCES COCLIVROS (
SEQLIVRO
)
/CREATE TABLE COCLIVROSCOMPRADOR (
SEQCOMPRADOR NUMBER(15,0) NOT NULL,
NOME VARCHAR2(255) NOT NULL,
CPF CHAR(14) NOT NULL
)
STORAGE (
NEXT 1024 K
)
/CREATE INDEX IDX_COCLIVROSCOMPRADOR_CPF
ON COCLIVROSCOMPRADOR (
CPF
)
STORAGE (
NEXT 1024 K
)
/CREATE INDEX IDX_COCLIVROSCOMPRADOR_NOME
ON COCLIVROSCOMPRADOR (
NOME
)
STORAGE (
NEXT 1024 K
)
/ALTER TABLE COCLIVROSCOMPRADOR
ADD CONSTRAINT PK_COCLIVROSCOMPRADOR PRIMARY KEY (
SEQCOMPRADOR
)
USING INDEX
STORAGE (
NEXT 1024 K
)
/
INSERT INTO COCLIVROS (seqlivro, nome, autor, editora, datalanc)
VALUES(1, 'C# COMO PROGRAMAR', 'DEITEL', 'MAKRON BOOKS', To_Date('28.05.2003 00:00:00', 'dd.mm.yyyy hh24:mi:ss'));
INSERT INTO COCLIVROS (seqlivro, nome, autor, editora, datalanc)
VALUES(2, 'A QUEDA DO CéU', 'BRUCE ALBERT', 'COMPANHIA DAS LETRAS', To_Date('20.08.2015 00:00:00', 'dd.mm.yyyy hh24:mi:ss'));
INSERT INTO COCLIVROS (seqlivro, nome, autor, editora, datalanc)
VALUES(3, 'IDEIAS PARA ADIAR O FIM DO MUNDO (NOVA EDIçãO)', 'AILTON KRENAK', 'COMPANHIA DAS LETRAS', To_Date('20.07.2020 00:00:00', 'dd.mm.yyyy hh24:mi:ss'));
INSERT INTO COCLIVROS (seqlivro, nome, autor, editora, datalanc)
VALUES(4, 'O PERIGO DE UMA HISTóRIA úNICA', 'NGOZI ADICHIE', 'COMPANHIA DAS LETRAS', To_Date('12.08.2019 00:00:00', 'dd.mm.yyyy hh24:mi:ss'));
INSERT INTO COCLIVROS (seqlivro, nome, autor, editora, datalanc)
VALUES(5, 'ALICE NO ESPELHO', 'LAURA BERGALLO', 'SM', To_Date('15.12.2015 00:00:00', 'dd.mm.yyyy hh24:mi:ss'));
COMMIT;INSERT INTO COCLIVROSVENDIDOS (seqlivrovendido, seqlivro, datavenda, seqcomprador)
VALUES(1, 2, To_Date('01.07.2021 00:00:00', 'dd.mm.yyyy hh24:mi:ss'), 1);
INSERT INTO COCLIVROSVENDIDOS (seqlivrovendido, seqlivro, datavenda, seqcomprador)
VALUES(2, 1, To_Date('16.07.2021 00:00:00', 'dd.mm.yyyy hh24:mi:ss'), 2);
INSERT INTO COCLIVROSVENDIDOS (seqlivrovendido, seqlivro, datavenda, seqcomprador)
VALUES(3, 5, To_Date('16.07.2021 00:00:00', 'dd.mm.yyyy hh24:mi:ss'), 2);
INSERT INTO COCLIVROSVENDIDOS (seqlivrovendido, seqlivro, datavenda, seqcomprador)
VALUES(4, 4, To_Date('20.07.2021 00:00:00', 'dd.mm.yyyy hh24:mi:ss'), 3);
INSERT INTO COCLIVROSVENDIDOS (seqlivrovendido, seqlivro, datavenda, seqcomprador)
VALUES(5, 3, To_Date('22.07.2021 00:00:00', 'dd.mm.yyyy hh24:mi:ss'), 5);
COMMIT;INSERT INTO COCLIVROSCOMPRADOR (seqcomprador, nome, cpf)
VALUES(1, 'Eloá Fernanda Castro', '54755412218 ');
INSERT INTO COCLIVROSCOMPRADOR (seqcomprador, nome, cpf)
VALUES(2, 'Josefa Cristiane Silveira', '41715817370 ');
INSERT INTO COCLIVROSCOMPRADOR (seqcomprador, nome, cpf)
VALUES(3, 'Cauã Lucas Melo', '04302952601 ');
INSERT INTO COCLIVROSCOMPRADOR (seqcomprador, nome, cpf)
VALUES(4, 'Isabelly Andreia Heloise Corte Real', '80624417506 ');
INSERT INTO COCLIVROSCOMPRADOR (seqcomprador, nome, cpf)
VALUES(5, 'Lavínia Malu Oliveira', '17284362650 ');
INSERT INTO COCLIVROSCOMPRADOR (seqcomprador, nome, cpf)
VALUES(6, 'Hadassa Elaine Oliveira', '45719462872 ');
INSERT INTO COCLIVROSCOMPRADOR (seqcomprador, nome, cpf)
VALUES(7, 'Benjamin Anthony Vieira', '01873781008 ');
COMMIT;--EXEMPLO
SELECT A.NOME, A.AUTOR, A.DATALANC, B.DATAVENDA, C.NOME FROM COCLIVROS A
INNER JOIN COCLIVROSVENDIDOS B ON (A.SEQLIVRO = B.SEQLIVRO)
INNER JOIN COCLIVROSCOMPRADOR C ON (B.SEQCOMPRADOR = C.SEQCOMPRADOR)
WHERE b.SEQCOMPRADOR = 5;



#################################
Inserido em: 2023-12-14 13:40

LYDBKP_S123456D123456_DESC1234
 
LYDBKP - identificador Lydians objeto de backup - 6 bits
_ - Separador - 1 bit
S - Solicitacao ex: 12345 - 7 bits
D - Demanda ex: 67890 - 7 bits
_ - Separador - 1 bit
DESC1234 - Breve descrição - 8 bits


